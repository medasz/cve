### [CVE-2021-47469](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-47469)
![](https://img.shields.io/static/v1?label=Product&message=Linux&color=blue)
![](https://img.shields.io/static/v1?label=Version&message=1da177e4c3f4%3C%20aa3f3d7bef59%20&color=brighgreen)
![](https://img.shields.io/static/v1?label=Vulnerability&message=n%2Fa&color=brighgreen)

### Description

In the Linux kernel, the following vulnerability has been resolved:spi: Fix deadlock when adding SPI controllers on SPI busesCurrently we have a global spi_add_lock which we take when adding newdevices so that we can check that we're not trying to reuse a chipselect that's already controlled.  This means that if the SPI device isitself a SPI controller and triggers the instantiation of further SPIdevices we trigger a deadlock as we try to register and instantiatethose devices while in the process of doing so for the parent controllerand hence already holding the global spi_add_lock.  Since we only careabout concurrency within a single SPI bus move the lock to be percontroller, avoiding the deadlock.This can be easily triggered in the case of spi-mux.

### POC

#### Reference
No PoCs from references.

#### Github
- https://github.com/w4zu/Debian_security

