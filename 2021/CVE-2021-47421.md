### [CVE-2021-47421](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-47421)
![](https://img.shields.io/static/v1?label=Product&message=Linux&color=blue)
![](https://img.shields.io/static/v1?label=Version&message=&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=5.10%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=c9a6b82f45e261d247b980a7949aaa6a9bfffe01%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Vulnerability&message=n%2Fa&color=blue)

### Description

In the Linux kernel, the following vulnerability has been resolved:drm/amdgpu: handle the case of pci_channel_io_frozen only in amdgpu_pci_resumeIn current code, when a PCI error state pci_channel_io_normal is detectd,it will report PCI_ERS_RESULT_CAN_RECOVER status to PCI driver, and PCIdriver will continue the execution of PCI resume callback report_resume bypci_walk_bridge, and the callback will go into amdgpu_pci_resumefinally, where write lock is releasd unconditionally without acquiringsuch lock first. In this case, a deadlock will happen when other threadsstart to acquire the read lock.To fix this, add a member in amdgpu_device strucutre to cachepci_channel_state, and only continue the execution in amdgpu_pci_resumewhen it's pci_channel_io_frozen.

### POC

#### Reference
No PoCs from references.

#### Github
- https://github.com/w4zu/Debian_security

